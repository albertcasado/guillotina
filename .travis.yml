language: python
python:
- 3.6-dev
sudo: required
services:
  - postgresql
cache:
  directories:
  - eggs
before_script:
  - psql -c 'create database guillotina;' -U postgres
install:
- python bootstrap-buildout.py
- bin/buildout -t 3
- pip install flake8
- pip install coverage==4.0.3
- sleep 15
script:
- bin/py.test -s --cov=guillotina -v --cov-report term-missing guillotina
- bin/code-analysis
after_success:
- coveralls
- cat .coverage
